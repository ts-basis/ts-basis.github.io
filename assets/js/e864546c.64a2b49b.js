"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[5028],{488:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>c,contentTitle:()=>o,default:()=>h,frontMatter:()=>l,metadata:()=>i,toc:()=>a});var s=r(4848),t=r(8453);const l={title:"Properties Controller",sidebar_position:1},o="Properties Controller",i={id:"typetools/extensions/properties-controller",title:"Properties Controller",description:"PropertiesController module is the base module used by the dataclass models dealing",source:"@site/docs/05_typetools/extensions/properties-controller.mdx",sourceDirName:"05_typetools/extensions",slug:"/typetools/extensions/properties-controller",permalink:"/docs/typetools/extensions/properties-controller",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:1,frontMatter:{title:"Properties Controller",sidebar_position:1},sidebar:"tutorialSidebar",previous:{title:"Default Extensions",permalink:"/docs/category/default-extensions"},next:{title:"Data Importable",permalink:"/docs/typetools/extensions/data-importable"}},c={},a=[{value:"Table of Contents",id:"table-of-contents",level:2},{value:"<code>PropertiesController</code> - Getters/Setters",id:"propertiescontroller---getterssetters",level:2},{value:"Classes and Interfaces",id:"classes-and-interfaces",level:2},{value:"PropertiesControllerSettings",id:"propertiescontrollersettings",level:3},{value:"Properties",id:"properties",level:4},{value:"PropertyAccessTrace",id:"propertyaccesstrace",level:3},{value:"Properties",id:"properties-1",level:4},{value:"PropertyAccessEvent",id:"propertyaccessevent",level:3},{value:"Properties",id:"properties-2",level:4},{value:"Methods",id:"methods",level:4},{value:"PropertyControlLayer",id:"propertycontrollayer",level:3},{value:"Properties",id:"properties-3",level:4},{value:"PropertyController",id:"propertycontroller",level:3},{value:"Properties",id:"properties-4",level:4},{value:"Methods",id:"methods-1",level:4},{value:"PropertiesManagementOptions",id:"propertiesmanagementoptions",level:3},{value:"Properties",id:"properties-5",level:4},{value:"PropertiesControllerExtensionData",id:"propertiescontrollerextensiondata",level:3},{value:"Properties",id:"properties-6",level:4},{value:"PropertiesController",id:"propertiescontroller",level:3},{value:"Static Methods",id:"static-methods",level:4},{value:"Instance Methods",id:"instance-methods",level:4},{value:"Usage",id:"usage",level:4},{value:"Usage Examples",id:"usage-examples",level:2},{value:"Example 1: Validating Property Values",id:"example-1-validating-property-values",level:3},{value:"Example 2: Transforming Property Values",id:"example-2-transforming-property-values",level:3}];function d(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"properties-controller",children:"Properties Controller"})}),"\n",(0,s.jsxs)(n.p,{children:["PropertiesController module is the base module used by the dataclass models dealing\nwith property ",(0,s.jsx)(n.code,{children:"get()"})," and ",(0,s.jsx)(n.code,{children:"set()"})," operations. Many extensions require PropertiesController\nto make sure pre/post callbacks are called upon property access of the model data."]}),"\n",(0,s.jsxs)(n.p,{children:["The ",(0,s.jsx)(n.strong,{children:"Properties Controller"})," module is designed to provide fine-grained control over property access in TypeScript classes. By utilizing this module, developers can:"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Intercept property ",(0,s.jsx)(n.code,{children:"get"})," and ",(0,s.jsx)(n.code,{children:"set"})," operations."]}),"\n",(0,s.jsx)(n.li,{children:"Apply custom validation, transformation, or side effects during property access."}),"\n",(0,s.jsx)(n.li,{children:"Manage property access events and handle errors or cancellations gracefully."}),"\n",(0,s.jsx)(n.li,{children:"Extend classes with property control capabilities without modifying their original implementation."}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"table-of-contents",children:"Table of Contents"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"##propertiescontroller---getterssetters",children:"Getters/Setters"})}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"#classes-and-interfaces",children:"Classes and Interfaces"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#propertiescontrollersettings",children:"PropertiesControllerSettings"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#propertyaccesstrace",children:"PropertyAccessTrace"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#propertyaccessevent",children:"PropertyAccessEvent"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#propertycontrollayer",children:"PropertyControlLayer"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#propertycontroller",children:"PropertyController"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#propertiesmanagementoptions",children:"PropertiesManagementOptions"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#propertiescontrollerextensiondata",children:"PropertiesControllerExtensionData"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#propertiescontroller",children:"PropertiesController"})}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#usage-examples",children:"Usage Examples"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#conclusion",children:"Conclusion"})}),"\n"]}),"\n",(0,s.jsxs)(n.h2,{id:"propertiescontroller---getterssetters",children:[(0,s.jsx)(n.code,{children:"PropertiesController"})," - Getters/Setters"]}),"\n",(0,s.jsxs)(n.p,{children:["Most extensions are built on the base class ",(0,s.jsx)(n.code,{children:"PropertiesController"})," which does a lot more general handling of getters, setters, and onvaluechage events."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"import { defineOn } from 'ts-basis';\nclass MyClass {\n  myProp1 = 'firstValue';\n  myProp2 = 300;\n  constructor(init?: Partial<MyClass>) {\n    defineOn(this, MyClass, lib => {\n      const manageOptions = {}; // options like 'prepend', 'alwaysFront', 'alwaysBack', 'order'\n      lib.propertiesController.manage(this, manageOptions, {\n        myProp1: {\n          set(value, e) { console.log(`setter: ${e.path} being set '${value}'`); },\n          get(value, e) { console.log(`getter: ${e.path} being accessed`); },\n          change(oldValue, newValue, e) { console.log(`onchange: ${e.path} changed from '${oldValue}' to '${newValue}'`); },\n        }\n      });\n      // manage function is additive in terms of handlers\n      lib.propertiesController.manage(this, manageOptions, {\n        myProp1: {\n          set(value, e) { console.log(`setter 2`); },\n          get(value, e) { console.log(`getter 2`); },\n          change(oldValue, newValue, e) { console.log(`onchange 2`); },\n        }\n      });\n  }\n}\n\nconst a = new MyClass();\na.myProp1 = a.myProp1 + '2';\n// getter: MyClass.myProp1 being accessed\n// getter 2\n// setter: MyClass.myProp1 being set 'firstValue2'\n// setter 2\n// onchange: MyClass.myProp1 changed from 'firstValue' to 'firstValue2'\n// onchange 2\n"})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"classes-and-interfaces",children:"Classes and Interfaces"}),"\n",(0,s.jsxs)(n.p,{children:["Below is a detailed breakdown of the classes and interfaces provided by the ",(0,s.jsx)(n.strong,{children:"Properties Controller"})," module."]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h3,{id:"propertiescontrollersettings",children:"PropertiesControllerSettings"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Extends:"})," ",(0,s.jsx)(n.code,{children:"TypeToolsSettings"})]}),"\n",(0,s.jsxs)(n.p,{children:["The ",(0,s.jsx)(n.code,{children:"PropertiesControllerSettings"})," class holds global and instance settings for the ",(0,s.jsx)(n.code,{children:"PropertiesController"}),". It allows for configuring the behavior of property control on a global or per-instance basis."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"export class PropertiesControllerSettings extends TypeToolsSettings {\n  static disabledGlobally = false;\n  static extensionPropertiesController = 'PropertiesController';\n  extensionPropertiesController = PropertiesControllerSettings.extensionPropertiesController;\n\n  constructor(init?: Partial<PropertiesControllerSettings>) {\n    super(init);\n    if (init) {\n      Object.assign(this, init);\n    }\n  }\n}\n"})}),"\n",(0,s.jsx)(n.h4,{id:"properties",children:"Properties"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"disabledGlobally: boolean"})," (static)","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Determines if property control is disabled globally."}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"extensionPropertiesController: string"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["The name of the extension used in the ",(0,s.jsx)(n.code,{children:"TypeTools"})," infrastructure."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h3,{id:"propertyaccesstrace",children:"PropertyAccessTrace"}),"\n",(0,s.jsxs)(n.p,{children:["The ",(0,s.jsx)(n.code,{children:"PropertyAccessTrace"})," class is used to store traces of property access events, particularly for error handling and debugging purposes."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"export class PropertyAccessTrace {\n  trace: Error;\n  e: PropertyAccessEvent;\n}\n"})}),"\n",(0,s.jsx)(n.h4,{id:"properties-1",children:"Properties"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"trace: Error"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"The error trace associated with the property access."}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"e: PropertyAccessEvent"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"The event data related to the property access."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h3,{id:"propertyaccessevent",children:"PropertyAccessEvent"}),"\n",(0,s.jsxs)(n.p,{children:["The ",(0,s.jsx)(n.code,{children:"PropertyAccessEvent"})," class encapsulates the context and data related to a property access event. It provides methods to control property access flow, such as cancelling the operation, throwing errors, or transforming the property value."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"export class PropertyAccessEvent {\n  property: string;\n  className: string;\n  classRealPath: string;\n  path: string;\n  class: any;\n  data: { [flagName: string]: any } = {};\n  ignoredClasses: Class<any>[] = [];\n  value: any;\n  oldValue: any;\n  thrown: boolean;\n\n  constructor(init?: Partial<PropertyAccessEvent>) {\n    if (init) {\n      Object.assign(this, init);\n    }\n  }\n\n  // Methods...\n}\n"})}),"\n",(0,s.jsx)(n.h4,{id:"properties-2",children:"Properties"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"property: string"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"The name of the property being accessed."}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"className: string"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"The name of the class where the property resides."}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"classRealPath: string"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"The full path of the class."}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"path: string"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["The full property path (e.g., ",(0,s.jsx)(n.code,{children:"ClassName.property"}),")."]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"class: any"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"The class object."}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"data: { [flagName: string]: any }"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"A data map for storing custom flags or information during the event."}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"ignoredClasses: Class<any>[]"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"A list of classes to ignore for definitions during the event handling."}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"value: any"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"The current value of the property."}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"oldValue: any"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["The previous value of the property (used during ",(0,s.jsx)(n.code,{children:"set"})," operations)."]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"thrown: boolean"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Indicates if an error was thrown during the event."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h4,{id:"methods",children:"Methods"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"clearData()"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Resets the event data."}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"cancel(message?: string)"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Cancels the property access operation with an optional message."}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"throw(message?: string)"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Throws an error to stop the property access operation."}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"stopPropagation()"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Stops further propagation of the event to other handlers."}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"transformValue(newValue: any)"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Transforms the property value during the event handling."}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"getStackTrace()"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Retrieves the stack trace for debugging purposes."}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"ignoreDefinitionsFrom<T = any>(...classes: Class<T>[])"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Specifies classes to ignore when handling the event."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h3,{id:"propertycontrollayer",children:"PropertyControlLayer"}),"\n",(0,s.jsxs)(n.p,{children:["The ",(0,s.jsx)(n.code,{children:"PropertyControlLayer"})," class defines the control logic for property access. It allows you to define custom ",(0,s.jsx)(n.code,{children:"get"}),", ",(0,s.jsx)(n.code,{children:"set"}),", and ",(0,s.jsx)(n.code,{children:"change"})," handlers for properties."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"export class PropertyControlLayer {\n  get: (value, e: PropertyAccessEvent) => any;\n  set: (newValue, e: PropertyAccessEvent) => any;\n  change: (oldValue, newValue, e: PropertyAccessEvent) => void;\n  throwError: boolean = true;\n\n  constructor(init?: Partial<PropertyControlLayer>) {\n    if (init) {\n      Object.assign(this, init);\n    }\n  }\n}\n"})}),"\n",(0,s.jsx)(n.h4,{id:"properties-3",children:"Properties"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"get: (value, e: PropertyAccessEvent) => any"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["A handler function for property ",(0,s.jsx)(n.code,{children:"get"})," operations."]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"set: (newValue, e: PropertyAccessEvent) => any"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["A handler function for property ",(0,s.jsx)(n.code,{children:"set"})," operations."]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"change: (oldValue, newValue, e: PropertyAccessEvent) => void"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"A handler function for when a property's value changes."}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"throwError: boolean"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Determines if an error should be thrown when an exception occurs."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h3,{id:"propertycontroller",children:"PropertyController"}),"\n",(0,s.jsxs)(n.p,{children:["The ",(0,s.jsx)(n.code,{children:"PropertyController"})," class manages the control layers for individual properties, keeping track of the value and handling the ",(0,s.jsx)(n.code,{children:"get"}),", ",(0,s.jsx)(n.code,{children:"set"}),", and ",(0,s.jsx)(n.code,{children:"change"})," operations."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"export class PropertyController {\n  property: string;\n  valueKeeper: { value: any };\n  getters: ((value, e: PropertyAccessEvent) => any)[];\n  setters: ((newValue, e: PropertyAccessEvent) => any)[];\n  changes: ((oldValue, newValue, e: PropertyAccessEvent) => void)[];\n  descriptor: PropertyDescriptor;\n  getError?: Error;\n  setError?: Error;\n  extension?: any;\n  get?: boolean;\n  set?: boolean;\n\n  constructor(init?: Partial<PropertyController>) {\n    if (init) {\n      Object.assign(this, init);\n    }\n  }\n\n  // Methods...\n}\n"})}),"\n",(0,s.jsx)(n.h4,{id:"properties-4",children:"Properties"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"property: string"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"The name of the property being controlled."}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"valueKeeper: { value: any }"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"An object that holds the current value of the property."}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"getters: ((value, e: PropertyAccessEvent) => any)[]"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["A list of ",(0,s.jsx)(n.code,{children:"get"})," handler functions."]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"setters: ((newValue, e: PropertyAccessEvent) => any)[]"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["A list of ",(0,s.jsx)(n.code,{children:"set"})," handler functions."]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"changes: ((oldValue, newValue, e: PropertyAccessEvent) => void)[]"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["A list of ",(0,s.jsx)(n.code,{children:"change"})," handler functions."]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"descriptor: PropertyDescriptor"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["The property descriptor used in ",(0,s.jsx)(n.code,{children:"Object.defineProperty"}),"."]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"getError?: Error"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Stores any error that occurred during a ",(0,s.jsx)(n.code,{children:"get"})," operation."]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"setError?: Error"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Stores any error that occurred during a ",(0,s.jsx)(n.code,{children:"set"})," operation."]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"extension?: any"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"An object for storing additional extension data."}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"get?: boolean"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Indicates if the property has a ",(0,s.jsx)(n.code,{children:"get"})," handler."]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"set?: boolean"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Indicates if the property has a ",(0,s.jsx)(n.code,{children:"set"})," handler."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h4,{id:"methods-1",children:"Methods"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"orderHandlers()"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Orders the handlers based on specified order rules."}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"orderHandler(handlers: any[])"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Helper function to order individual handlers."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Note:"})," The ",(0,s.jsx)(n.code,{children:"orderHandlers"})," and ",(0,s.jsx)(n.code,{children:"orderHandler"})," methods are used internally to sort the handlers, ensuring that any handlers marked to always be at the front or back are positioned correctly."]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h3,{id:"propertiesmanagementoptions",children:"PropertiesManagementOptions"}),"\n",(0,s.jsx)(n.p,{children:"An interface that defines options for managing property control layers."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"export interface PropertiesManagementOptions {\n  prepend?: boolean;\n  alwaysFront?: boolean;\n  alwaysBack?: boolean;\n  order?: number;\n}\n"})}),"\n",(0,s.jsx)(n.h4,{id:"properties-5",children:"Properties"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"prepend?: boolean"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["If ",(0,s.jsx)(n.code,{children:"true"}),", new handlers are added to the front of the handlers list."]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"alwaysFront?: boolean"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["If ",(0,s.jsx)(n.code,{children:"true"}),", the handler is always placed at the front, regardless of order."]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"alwaysBack?: boolean"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["If ",(0,s.jsx)(n.code,{children:"true"}),", the handler is always placed at the back, regardless of order."]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"order?: number"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Numerical order to position the handler within the list."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h3,{id:"propertiescontrollerextensiondata",children:"PropertiesControllerExtensionData"}),"\n",(0,s.jsxs)(n.p,{children:["Implements ",(0,s.jsx)(n.code,{children:"TypeToolsExtensionData"})]}),"\n",(0,s.jsxs)(n.p,{children:["This class holds extension data specific to the ",(0,s.jsx)(n.code,{children:"PropertiesController"}),". It stores managed properties, error and cancel traces, and event handlers."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"export class PropertiesControllerExtensionData implements TypeToolsExtensionData {\n  managed: { [propName: string]: PropertyController };\n  errors?: PropertyAccessTrace[];\n  cancels?: PropertyAccessTrace[];\n  onerrors: ((tracer: PropertyAccessTrace) => any)[];\n  oncancels: ((tracer: PropertyAccessTrace) => any)[];\n  onpropertychanges?: ((\n    propName: string,\n    oldValue: any,\n    newValue: any,\n    immediate?: boolean,\n  ) => any)[];\n}\n"})}),"\n",(0,s.jsx)(n.h4,{id:"properties-6",children:"Properties"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"managed: { [propName: string]: PropertyController }"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"A map of property names to their controllers."}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"errors?: PropertyAccessTrace[]"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"A list of error traces occurred during property operations."}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"cancels?: PropertyAccessTrace[]"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"A list of cancel traces occurred during property operations."}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"onerrors: ((tracer: PropertyAccessTrace) => any)[]"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Event handlers for errors."}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"oncancels: ((tracer: PropertyAccessTrace) => any)[]"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Event handlers for cancellations."}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"onpropertychanges?: ((propName: string, oldValue: any, newValue: any, immediate?: boolean) => any)[]"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Event handlers for property value changes."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h3,{id:"propertiescontroller",children:"PropertiesController"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Implements:"})," ",(0,s.jsx)(n.code,{children:"TypeToolsExtension"})]}),"\n",(0,s.jsxs)(n.p,{children:["The ",(0,s.jsx)(n.code,{children:"PropertiesController"})," class is the main extension that applies property control to target objects. It provides static methods for managing property access and can be used to implement property control on any object."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"export class PropertiesController implements TypeToolsExtension {\n  settings: PropertiesControllerSettings;\n\n  constructor(settings?: Partial<PropertiesControllerSettings>) {\n    this.settings = settingsInitialize(PropertiesControllerSettings, settings);\n  }\n\n  // Static Methods...\n  // Instance Methods...\n}\n"})}),"\n",(0,s.jsx)(n.h4,{id:"static-methods",children:"Static Methods"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"getExtensionData(target: any, settings = PropertiesControllerSettings): PropertiesControllerExtensionData"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Retrieves the extension data associated with the target object."}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"typeCheck(target: any, settings = PropertiesControllerSettings): boolean"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Checks if the target object has the ",(0,s.jsx)(n.code,{children:"PropertiesController"})," extension applied."]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"implementOn(target: any, settings = PropertiesControllerSettings): boolean"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Implements the ",(0,s.jsx)(n.code,{children:"PropertiesController"})," extension on the target object."]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"manage<T = any>(target: T, options: PropertiesManagementOptions, rubric: PartialCustom<T, Partial<PropertyControlLayer>>, settings = PropertiesControllerSettings)"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Manages property control layers for the target object based on the provided rubric."}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"getErrorTracesOf(target: any, settings = PropertiesControllerSettings): PropertyAccessTrace[]"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Retrieves the error traces for the target object."}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"getCancelTracesOf(target: any, settings = PropertiesControllerSettings): PropertyAccessTrace[]"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Retrieves the cancel traces for the target object."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h4,{id:"instance-methods",children:"Instance Methods"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"getExtensionData(target: any): PropertiesControllerExtensionData"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Instance version of the static method."}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"typeCheck(target: any): boolean"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Instance version of the static method."}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"implementOn(target: any): boolean"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Instance version of the static method."}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"manage<T = any>(target: T, options: PropertiesManagementOptions, rubric: PartialCustom<T, Partial<PropertyControlLayer>>)"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Instance version of the static method."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h4,{id:"usage",children:"Usage"}),"\n",(0,s.jsxs)(n.p,{children:["The ",(0,s.jsx)(n.code,{children:"PropertiesController"})," can be used to add property control to any object. Here's how you might use it:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"// Create a target object\nconst targetObject = { name: 'Alice', age: 30 };\n\n// Create an instance of PropertiesController\nconst propertiesController = new PropertiesController();\n\n// Implement property control on the target object\npropertiesController.implementOn(targetObject);\n\n// Define property control layers\npropertiesController.manage(targetObject, {}, {\n  name: {\n    get(value, e) {\n      console.log(`Getting name: ${value}`);\n      return value;\n    },\n    set(newValue, e) {\n      if (typeof newValue !== 'string') {\n        e.throw('Name must be a string');\n        return false;\n      }\n      console.log(`Setting name to: ${newValue}`);\n    },\n  },\n  age: {\n    set(newValue, e) {\n      if (newValue < 0) {\n        e.cancel('Age cannot be negative');\n        return false;\n      }\n    },\n  },\n});\n\n// Access the properties\nconsole.log(targetObject.name); // Getting name: Alice\ntargetObject.name = 'Bob';      // Setting name to: Bob\ntargetObject.age = -5;          // Operation cancelled: Age cannot be negative\n"})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"usage-examples",children:"Usage Examples"}),"\n",(0,s.jsx)(n.h3,{id:"example-1-validating-property-values",children:"Example 1: Validating Property Values"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"const user = { username: 'john_doe', email: 'john@example.com' };\nconst controller = new PropertiesController();\n\n// Implement property control on the user object\ncontroller.implementOn(user);\n\n// Manage properties with validation\ncontroller.manage(user, {}, {\n  email: {\n    set(newValue, e) {\n      const emailRegex = /\\S+@\\S+\\.\\S+/;\n      if (!emailRegex.test(newValue)) {\n        e.throw('Invalid email format');\n        return false;\n      }\n    },\n  },\n});\n\n// Attempt to set an invalid email\ntry {\n  user.email = 'invalid_email'; // Throws error: Invalid email format\n} catch (error) {\n  console.error(error.message);\n}\n"})}),"\n",(0,s.jsx)(n.h3,{id:"example-2-transforming-property-values",children:"Example 2: Transforming Property Values"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"const product = { price: 100 };\nconst controller = new PropertiesController();\n\ncontroller.implementOn(product);\n\ncontroller.manage(product, {}, {\n  price: {\n    set(newValue, e) {\n      // Ensure the price is always stored as a number\n      const numericValue = parseFloat(newValue);\n      if (isNaN(numericValue)) {\n        e.cancel('Price must be a number');\n        return false;\n      }\n      e.transformValue(numericValue.toFixed(2)); // Transform to two decimal places\n    },\n  },\n});\n\nproduct.price = '150.5678'; // price is now '150.57'\nconsole.log(product.price);  // Outputs: '150.57'\n"})}),"\n",(0,s.jsx)(n.hr,{})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},8453:(e,n,r)=>{r.d(n,{R:()=>o,x:()=>i});var s=r(6540);const t={},l=s.createContext(t);function o(e){const n=s.useContext(l);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:o(e.components),s.createElement(l.Provider,{value:n},e.children)}}}]);