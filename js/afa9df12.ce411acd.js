"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[8827],{8336:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>a,contentTitle:()=>l,default:()=>h,frontMatter:()=>t,metadata:()=>d,toc:()=>o});var s=i(4848),r=i(8453);const t={title:"Derivable",sidebar_position:4},l="Derivables",d={id:"typetools/extensions/derivable",title:"Derivable",description:"Table of Contents",source:"@site/docs/05_typetools/extensions/derivable.mdx",sourceDirName:"05_typetools/extensions",slug:"/typetools/extensions/derivable",permalink:"/docs/typetools/extensions/derivable",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:4,frontMatter:{title:"Derivable",sidebar_position:4},sidebar:"tutorialSidebar",previous:{title:"Validatable",permalink:"/docs/typetools/extensions/validatable"},next:{title:"Ephemerals",permalink:"/docs/typetools/extensions/ephemerals"}},a={},o=[{value:"Table of Contents",id:"table-of-contents",level:2},{value:"<code>Derivables</code> - Derived Properties",id:"derivables---derived-properties",level:2},{value:"Classes and Interfaces",id:"classes-and-interfaces",level:2},{value:"DerivablesSettings",id:"derivablessettings",level:3},{value:"DerivablesMetadata",id:"derivablesmetadata",level:3},{value:"DerivablesOptions",id:"derivablesoptions",level:3},{value:"DerivablesExtensionData",id:"derivablesextensiondata",level:3},{value:"Derivables",id:"derivables-1",level:3},{value:"Methods and Functionality",id:"methods-and-functionality",level:2},{value:"<code>getExtensionData</code>",id:"getextensiondata",level:3},{value:"<code>typeCheck</code>",id:"typecheck",level:3},{value:"<code>implementOn</code>",id:"implementon",level:3},{value:"<code>of</code>",id:"of",level:3}];function c(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"derivables",children:"Derivables"})}),"\n",(0,s.jsx)(n.h2,{id:"table-of-contents",children:"Table of Contents"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#derivables---derived-properties",children:"Overview"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#imports-and-dependencies",children:"Imports and Dependencies"})}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"#classes-and-interfaces",children:"Classes and Interfaces"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#derivablessettings",children:"DerivablesSettings"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#derivablesmetadata",children:"DerivablesMetadata"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#derivablesoptions",children:"DerivablesOptions"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#derivablesextensiondata",children:"DerivablesExtensionData"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#derivables",children:"Derivables"})}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#methods-and-functionality",children:"Methods and Functionality"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#usage",children:"Usage (Additional)"})}),"\n"]}),"\n",(0,s.jsxs)(n.h2,{id:"derivables---derived-properties",children:[(0,s.jsx)(n.code,{children:"Derivables"})," - Derived Properties"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"Derivables"})," extension will listen to source properties changes and update the derived property's value. Usually, derived properties are also non-serializable (since it can be derived from data), therefore you can apply ",(0,s.jsx)(n.code,{children:"Ephemerals"})," on it."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"class DerivedTestClass {\n  strVal = 'string';\n  numVal = 5;\n  derivedProp: string; /* DERIVED */\n  derivedProp2: string; /* DERIVED EPHEM */\n  constructor(init?: Partial<DerivedTestClass>) {\n    defineOn(this, DerivedTestClass, lib => {\n      lib.derivables.of(this, { /* options */ }, {\n        derivedProp: (strVal, numVal) => strVal + numVal, // short format\n        derivedProp2: { // long format, functionally the same as above (a little fatster in terms of perf)\n          from: { strVal:1, numVal:1 },\n          derive() { return this.strVal + this.numVal; }\n        }\n        ...\n      lib.ephemerals.of(this, { derivedProp2: true, ...\n  }\n}\n\nconst d = new DerivedTestClass({ strVal: 'joined', numVal: 5 }));\nconsole.log( d.derivedProp ); // 'joined5'\nd.strVal = 'joined2_'; // updated source\nd.numVal = 10;\nconsole.log( d.derivedProp ); // 'joinedUpdated_10' automatically updated\nconsole.log( JSON.stringify(d) ); // derivedProp2 not saved: {\"strVal\":\"joined2_\",\"numVal\":10,\"derivedProp\":\"joined2_10\"}\n"})}),"\n",(0,s.jsx)(n.h2,{id:"classes-and-interfaces",children:"Classes and Interfaces"}),"\n",(0,s.jsx)(n.h3,{id:"derivablessettings",children:"DerivablesSettings"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.code,{children:"DerivablesSettings"})})," is a class that extends ",(0,s.jsx)(n.code,{children:"PropertiesControllerSettings"}),". It provides settings specific to derivable properties."]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Static Properties:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"extensionDerivables"}),": A string identifier for this extension, defaulting to ",(0,s.jsx)(n.code,{children:"'Derivables'"}),"."]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Constructor:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Accepts an optional initial configuration and assigns any provided settings."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"derivablesmetadata",children:"DerivablesMetadata"}),"\n",(0,s.jsx)(n.p,{children:"An interface for metadata associated with derivable properties."}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.code,{children:"from"})}),": Specifies the properties from which the derivation occurs."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.code,{children:"derive"})}),": A function that performs the derivation."]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"derivablesoptions",children:"DerivablesOptions"}),"\n",(0,s.jsx)(n.p,{children:"An interface to specify options for derivable properties."}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.code,{children:"derive"})}),": A boolean indicating if derivation should take place."]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"derivablesextensiondata",children:"DerivablesExtensionData"}),"\n",(0,s.jsxs)(n.p,{children:["A class implementing ",(0,s.jsx)(n.code,{children:"TypeToolsExtensionData"}),", it contains:"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.code,{children:"rubric"})}),": Object mapping property names to their derivation logic."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.code,{children:"triggers"})}),": Maps property names to lists of dependent properties and guards against repeated derivations."]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"derivables-1",children:"Derivables"}),"\n",(0,s.jsxs)(n.p,{children:["The core class implementing the derivable properties mechanism, extends functionality via ",(0,s.jsx)(n.code,{children:"TypeToolsExtension"}),"."]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Static Methods:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"getExtensionData"}),": Retrieves extension data for a target."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"typeCheck"}),": Checks if a target has required derivable properties."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"implementOn"}),": Implements derivable properties on a target."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"of"}),": Sets up derivable properties according to the rubric provided."]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Constructor"}),": Initializes with optional settings."]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"methods-and-functionality",children:"Methods and Functionality"}),"\n",(0,s.jsx)(n.h3,{id:"getextensiondata",children:(0,s.jsx)(n.code,{children:"getExtensionData"})}),"\n",(0,s.jsx)(n.p,{children:"Retrieves extension data related to derivable properties from a given target."}),"\n",(0,s.jsx)(n.h3,{id:"typecheck",children:(0,s.jsx)(n.code,{children:"typeCheck"})}),"\n",(0,s.jsx)(n.p,{children:"Validates if a given target can support derivable properties based on its settings."}),"\n",(0,s.jsx)(n.h3,{id:"implementon",children:(0,s.jsx)(n.code,{children:"implementOn"})}),"\n",(0,s.jsx)(n.p,{children:"Adds derivable functionality to a target class, ensuring it can handle property changes and derivations appropriately."}),"\n",(0,s.jsx)(n.h3,{id:"of",children:(0,s.jsx)(n.code,{children:"of"})}),"\n",(0,s.jsx)(n.p,{children:"Configures derivable properties on a target using a provided rubric that defines how each property should be derived. It:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Checks for circular dependencies with a maximum iteration limit."}),"\n",(0,s.jsx)(n.li,{children:"Initializes derived properties."}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(c,{...e})}):c(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>l,x:()=>d});var s=i(6540);const r={},t=s.createContext(r);function l(e){const n=s.useContext(t);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:l(e.components),s.createElement(t.Provider,{value:n},e.children)}}}]);