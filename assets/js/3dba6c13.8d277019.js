"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[6508],{847:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>a,contentTitle:()=>s,default:()=>p,frontMatter:()=>i,metadata:()=>d,toc:()=>c});var o=t(4848),r=t(8453);const i={title:"Predefined Roles",sidebar_position:4},s="Predefined Roles",d={id:"http-shim/predefined-roles",title:"Predefined Roles",description:"Any decorator-mounted API paths are individually controllable in terms of",source:"@site/docs/04_http-shim/predefined-roles.mdx",sourceDirName:"04_http-shim",slug:"/http-shim/predefined-roles",permalink:"/docs/http-shim/predefined-roles",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:4,frontMatter:{title:"Predefined Roles",sidebar_position:4},sidebar:"tutorialSidebar",previous:{title:"Handling Authentication",permalink:"/docs/http-shim/handling-auth"},next:{title:"Custom Middlewares",permalink:"/docs/http-shim/middleware"}},a={},c=[];function l(e){const n={code:"code",h1:"h1",header:"header",p:"p",pre:"pre",...(0,r.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.header,{children:(0,o.jsx)(n.h1,{id:"predefined-roles",children:"Predefined Roles"})}),"\n",(0,o.jsxs)(n.p,{children:["Any decorator-mounted API paths are individually controllable in terms of\nauthentication style and role requirements. ",(0,o.jsx)(n.code,{children:"HttpServerShim"})," class itself\nis a generic type that is able to take in a template class ",(0,o.jsx)(n.code,{children:"{[roleName]: any}"}),"\nwhich you can define based on your application needs."]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-typescript",children:"export class MyAppServer extends HttpServerShim<{\n    ADMIN: boolean, // you can add more role rubric as part of server type\n    USER: boolean,\n    ...,\n}> {\n    ...\n\n    @HTTP.POST(`/my-admin-api`)\n    @HTTP.ACCESS(['ADMIN']) // only ADMIN role can invoke\n    myAdminApiFunction = myAdminApiFunction\n\n    ...\n}\n\nserver.config.security.token.customHandler = async (\n    op: HttpOp,\n    token: string,\n): Promise<Result<boolean>> => {\n    // more authentications ...\n    if (token === 'admin_token') {\n      op.addApplicableRoles('ADMIN') // adds role ADMIN to current op context\n    }\n    return ok(true)\n}\n"})})]})}function p(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(l,{...e})}):l(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>s,x:()=>d});var o=t(6540);const r={},i=o.createContext(r);function s(e){const n=o.useContext(i);return o.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:s(e.components),o.createElement(i.Provider,{value:n},e.children)}}}]);