"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[4468],{5570:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>a,contentTitle:()=>l,default:()=>d,frontMatter:()=>r,metadata:()=>o,toc:()=>c});var t=s(4848),i=s(8453);const r={title:"Ephemerals",sidebar_position:5},l=void 0,o={id:"typetools/extensions/ephemerals",title:"Ephemerals",description:"Table of Contents",source:"@site/docs/05_typetools/extensions/ephemerals.mdx",sourceDirName:"05_typetools/extensions",slug:"/typetools/extensions/ephemerals",permalink:"/docs/typetools/extensions/ephemerals",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:5,frontMatter:{title:"Ephemerals",sidebar_position:5},sidebar:"tutorialSidebar",previous:{title:"Derivable",permalink:"/docs/typetools/extensions/derivable"},next:{title:"Utilities",permalink:"/docs/category/utilities"}},a={},c=[{value:"Table of Contents",id:"table-of-contents",level:2},{value:"Overview",id:"overview",level:2},{value:"<code>Ephemerals</code> - Serialization Control",id:"ephemerals---serialization-control",level:2},{value:"<strong>EphemeralsSettings</strong>",id:"ephemeralssettings",level:3},{value:"<strong>EphemeralsExtensionData</strong>",id:"ephemeralsextensiondata",level:3},{value:"<strong>Ephemerals</strong>",id:"ephemerals",level:3},{value:"Methods",id:"methods",level:2},{value:"<strong>getExtensionData</strong>",id:"getextensiondata",level:3},{value:"<strong>typeCheck</strong>",id:"typecheck",level:3},{value:"<strong>implementOn</strong>",id:"implementon",level:3},{value:"<strong>of</strong>",id:"of",level:3},{value:"Usage Example",id:"usage-example",level:2}];function h(e){const n={a:"a",code:"code",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.h2,{id:"table-of-contents",children:"Table of Contents"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#overview",children:"Overview"})}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:"#key-components",children:"Key Components"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#ephemeralssettings",children:"EphemeralsSettings"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#ephemeralsextensiondata",children:"EphemeralsExtensionData"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#ephemerals",children:"Ephemerals"})}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:"#methods",children:"Methods"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#getextensiondata",children:"getExtensionData"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#typecheck",children:"typeCheck"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#implementon",children:"implementOn"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#of",children:"of"})}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#usage-example",children:"Usage Example"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#conclusion",children:"Conclusion"})}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,t.jsxs)(n.p,{children:["The ",(0,t.jsx)(n.code,{children:"ephemerals.ts"}),' file provides functionality to work with temporary or "ephemeral" data extensions on objects. This can be particularly useful for scenarios where transient data needs to be associated with an object without permanently altering its structure. The file leverages the ',(0,t.jsx)(n.code,{children:"TypeTools"})," framework to manage these extensions efficiently."]}),"\n",(0,t.jsxs)(n.h2,{id:"ephemerals---serialization-control",children:[(0,t.jsx)(n.code,{children:"Ephemerals"})," - Serialization Control"]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"Ephemerals"})," extension will modify ",(0,t.jsx)(n.code,{children:"toJSON"})," function of the class to make sure ephemeral properties are not serialized by ",(0,t.jsx)(n.code,{children:"JSON.stringify"}),". (Performance cost: negligible.)"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"class EphemTest {\n  keptProp = 'value';\n  ignoredProp1 = 'test5'; /* EPHEM */\n  ignoredProp2 = 5; /* EPHEM */\n  constructor(init?: Partial<EphemTest>) {\n    defineOn(this, EphemTest, lib => {\n      lib.ephemerals.of(this, {\n        ignoredProp1: true,\n        ignoredProp2: true,\n        ...\n  }\n}\nconsole.log( JSON.stringify(new EphemTest()) ); // {\"keptProp\":\"value\"}\n"})}),"\n",(0,t.jsx)(n.h3,{id:"ephemeralssettings",children:(0,t.jsx)(n.strong,{children:"EphemeralsSettings"})}),"\n",(0,t.jsxs)(n.p,{children:["The ",(0,t.jsx)(n.code,{children:"EphemeralsSettings"})," class extends from ",(0,t.jsx)(n.code,{children:"TypeToolsSettings"})," and is used to initialize settings specific to the ",(0,t.jsx)(n.code,{children:"Ephemerals"})," extension."]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Static Property"}),": ",(0,t.jsx)(n.code,{children:"extensionEphemerals"})," - A string identifier for the extension."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Constructor"}),": Accepts an optional partial initialization object."]}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"export class EphemeralsSettings extends TypeToolsSettings {\n    static extensionEphemerals = 'Ephemerals';\n    extensionEphemerals = EphemeralsSettings.extensionEphemerals;\n\n    constructor(init?: Partial<EphemeralsSettings>) {\n        super(init);\n        if (init) {\n            Object.assign(this, init);\n        }\n    }\n}\n"})}),"\n",(0,t.jsx)(n.h3,{id:"ephemeralsextensiondata",children:(0,t.jsx)(n.strong,{children:"EphemeralsExtensionData"})}),"\n",(0,t.jsxs)(n.p,{children:["This class is an interface for extension data, defining a flexible structure (",(0,t.jsx)(n.code,{children:"[prop: string]: { source: any; data: any }"}),") to store ephemeral data associated with object properties."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"export class EphemeralsExtensionData implements TypeToolsExtensionData {\n    [prop: string]: { source: any; data: any };\n}\n"})}),"\n",(0,t.jsx)(n.h3,{id:"ephemerals",children:(0,t.jsx)(n.strong,{children:"Ephemerals"})}),"\n",(0,t.jsx)(n.p,{children:"The core class that implements the ephemeral extension functionality."}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Static Properties"}),":"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"debugData"}),": Collects debugging information."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"debugDataCollect"}),": Flag to enable or disable debug data collection."]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Methods"}),": Various static and instance methods to manage ephemeral data."]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"export class Ephemerals implements TypeToolsExtension {\n    static debugData: { ignoredKey: string; source: any; data?: any }[] = [];\n    static debugDataCollect = false;\n    // Further implementation...\n}\n"})}),"\n",(0,t.jsx)(n.h2,{id:"methods",children:"Methods"}),"\n",(0,t.jsx)(n.h3,{id:"getextensiondata",children:(0,t.jsx)(n.strong,{children:"getExtensionData"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Purpose"}),": Retrieve extension data from a target object."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Signature"}),": ",(0,t.jsx)(n.code,{children:"static getExtensionData(target: any, settings = EphemeralsSettings): EphemeralsExtensionData"})]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"typecheck",children:(0,t.jsx)(n.strong,{children:"typeCheck"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Purpose"}),": Check if a target object has the specific ephemeral extension data."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Signature"}),": ",(0,t.jsx)(n.code,{children:"static typeCheck(target: any, settings = EphemeralsSettings): boolean"})]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"implementon",children:(0,t.jsx)(n.strong,{children:"implementOn"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Purpose"}),": Implements the ephemeral extension on a given target if it doesn't already exist."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Signature"}),": ",(0,t.jsx)(n.code,{children:"static implementOn(target: any, settings = EphemeralsSettings)"})]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"of",children:(0,t.jsx)(n.strong,{children:"of"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Purpose"}),": Define ephemeral properties on a target object."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Signature"}),": ",(0,t.jsx)(n.code,{children:"static of<T = any>(target: T, properties: PartialAny<T>, settings = EphemeralsSettings)"})]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"usage-example",children:"Usage Example"}),"\n",(0,t.jsxs)(n.p,{children:["Here's a simple example of how you might use the ",(0,t.jsx)(n.code,{children:"Ephemerals"})," class to extend an object with ephemeral properties:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"import { Ephemerals } from './ephemerals';\n\n// Create a target object\nlet myObject = { name: 'Ephemeral Test' };\n\n// Define ephemeral properties\nconst properties = {\n    temporaryData: { value: 123 },\n};\n\n// Apply ephemerals to the object\nEphemerals.of(myObject, properties);\n\n// Convert to JSON, which respects ephemeral definition\nconsole.log(myObject.toJSON());\n"})})]})}function d(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(h,{...e})}):h(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>l,x:()=>o});var t=s(6540);const i={},r=t.createContext(i);function l(e){const n=t.useContext(r);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:l(e.components),t.createElement(r.Provider,{value:n},e.children)}}}]);